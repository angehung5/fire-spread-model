# fire-spread-model

Forecast model to predict future fire spatial distribution (fire spread) and intensity. 

## User settings

| Namelist Option | Namelist Description                                                     |
| --------------- | ------------------------------------------------------------------------ | 
| frp_input       | Filename of initial fire map                                             |
| model_input     | Filename of forecast model input                                         |
| model_output    | Filename of model output                                                 |
| frp_source      | Option for initial FRP dataset (0: RAVE)                                 |
| time_start      | Start/initial time stamp in YYYYMMDDHHMM                                 |
| time_end        | End time stamp in YYYYMMDDHHMM                                           |
| time_freq       | Integer time steps in hours (default = 1)                                |
| lat_lower_left  | Latitue in degree of the lower left corner of domain of interest         |
| lat_upper_right | Latitue in degree of the upper right corner of domain of interest        |
| lon_lower_left  | Longitude in degree of the lower left corner of domain of interest       |
| lon_upper_right | Longitude in degree of the upper right corner of domain of interest      |
| opt_frpgen      | Option for gridded frp reprocessor (0: off, 1: on)                       |
| opt_inputgen    | Option for model input generator (0: off, 1: on)                         |
| opt_forecast    | Option for main forecast model (0: off, 1: on)                           |
| opt_mapgen      | Option for fire mapper (0: off, 1: on)                                   |
| opt_corr        | Option for intensity correction model (0: off, 1: on)                    |
| opt_evaluation  | Option for model evaluation analysis (0: off, 1: on)                     |
| scale_opt       | Option for final FRP scaling (0: off, 1: on)                             |
| scale_val       | Scale factor for final FRP scaling, only available when scale_opt = 1    |

## How to run

python src/fire_model.py
Computational resource for a 24h cycle: 12 nodes, 8G mem, 1 hour

## Inputs

## Outputs

Spatial distribution and intensity of individual fires and gridded fire map for domain of interest.

## Conponents

1. Gridded FRP preprocessor (optional): Create gridded FRP file as initial fire map. The NOAA Regional Hourly ABI and VIIRS Emissions (RAVE) products are used as example.

2. Input generator: Extract required variables from provided datasets, select individual fires from domain of interest, pre-processing, and create model input file. 

3. Main forecast model: A Convolutional autoencoder model that creates prediction of the spatial distribution of future FRP. Post-processing performed.

4. Intensity correction model: A multiple linear regression model that corrects the FRP prediction generated by main forecast model.

5. Fire mapper: Map individual fires to gridded domain and create predicted fire map as final product.

6. Model evaluation: Perform simple evaluation analysis including model score matrix (bias, R2, RMSE, MRE, ratio*), spatial similarity** and alarm rates***), and plot analysis figures (scatter plot, kernel density estimate (KDE) plot, observed/predicted FRP spatial map for visual comparison and timeseries of model score maxtrix).

*Ratio = prediction / observation

**Spatial similiarty based on Hamming distance, lower the value higher spatial similiarty

***Three alarm rates are calcualted: True (model matches the real fire), false (model shows a fire that observation does not see), missing (model misses the fire). Consider fire spatial distribution only.
